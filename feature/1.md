# ğŸ¯ [Feature] ì‚¬ìš©ì ê´€ë¦¬ ì‹œìŠ¤í…œ ë° ì‚¬ìš©ëŸ‰ ê¸°ë°˜ ê³¼ê¸ˆ êµ¬í˜„

## ğŸ“‹ **ê°œìš”**
MVP ê²€ì¦ ì™„ë£Œ í›„ í”„ë¡œë•íŠ¸í™”ë¥¼ ìœ„í•œ ì‚¬ìš©ì ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶• ë° OpenAI Realtime API ì‚¬ìš©ëŸ‰ ê¸°ë°˜ ê³¼ê¸ˆ ì‹œìŠ¤í…œ êµ¬í˜„

## ğŸ¯ **ëª©í‘œ**
- [x] ê´€ë¦¬ìê°€ ì‚¬ìš©ì ê³„ì •ì„ ìƒì„±/ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œ êµ¬ì¶•
- [x] ì‚¬ìš©ìë³„ ìŒì„± ì¸ì‹ ì‚¬ìš©ëŸ‰ ì¶”ì  ë° ì œí•œ ê¸°ëŠ¥
- [x] ê°„ë‹¨í•œ ë¡œê·¸ì¸/ì¸ì¦ ì‹œìŠ¤í…œ êµ¬í˜„
- [x] ì‹¤ì œ ìŒì„± ê¸¸ì´ ê¸°ë°˜ ì •í™•í•œ ì‚¬ìš©ëŸ‰ ê³¼ê¸ˆ

## ğŸ—„ï¸ **ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„**

### **users í…Œì´ë¸”**
```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    salt TEXT NOT NULL,
    email TEXT,
    full_name TEXT,
    role TEXT DEFAULT 'user',  -- 'admin', 'user'
    is_active BOOLEAN DEFAULT 1,
    total_usage_seconds INTEGER DEFAULT 0,      -- ì´ ì‚¬ìš©ëŸ‰ (ì´ˆ)
    usage_limit_seconds INTEGER DEFAULT 3600,   -- ì‚¬ìš© ê°€ëŠ¥í•œ ì´ëŸ‰ (ì´ˆ)
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_login TIMESTAMP
);
```

### **usage_logs í…Œì´ë¸”**
```sql
CREATE TABLE usage_logs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    action TEXT NOT NULL,  -- 'transcribe'
    duration_seconds INTEGER NOT NULL,
    source_language TEXT,
    target_language TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    metadata TEXT,  -- JSON: transcript_length, etc.
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

## ğŸ”§ **êµ¬í˜„ ì‘ì—…**

### **1. ë°ì´í„°ë² ì´ìŠ¤ ë ˆì´ì–´ (database.py)**
- [x] SQLite DB ì—°ê²° ë° ìŠ¤í‚¤ë§ˆ ìƒì„±
- [x] User ëª¨ë¸ (ìƒì„±, ì¸ì¦, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ)
- [x] UsageLog ëª¨ë¸ (ì‚¬ìš©ëŸ‰ ê¸°ë¡, ì¡°íšŒ)
- [x] ë¹„ë°€ë²ˆí˜¸ í•´ì‹± (PBKDF2-SHA256)
- [x] .env ê¸°ë°˜ ì´ˆê¸° ê´€ë¦¬ì ê³„ì • ìƒì„±

### **2. ì¸ì¦ ì‹œìŠ¤í…œ**
- [x] ë¡œê·¸ì¸ í˜ì´ì§€ (Streamlit ê¸°ë°˜)
- [x] ì„¸ì…˜ ê´€ë¦¬ (st.session_state í™œìš©)
- [x] ê¶Œí•œ ì²´í¬ ë¯¸ë“¤ì›¨ì–´
- [x] ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥

### **3. ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ (/admin_dashboard)**
- [x] ì‚¬ìš©ì ëª©ë¡ ë³´ê¸° (ì‚¬ìš©ëŸ‰/ë‚¨ì€ì‹œê°„ í¬í•¨)
- [x] ì‹ ê·œ ì‚¬ìš©ì ìƒì„± í¼
- [x] ì‚¬ìš©ì ì •ë³´ ìˆ˜ì • (ì‚¬ìš©ëŸ‰ ì¶”ê°€, í™œì„±í™”/ë¹„í™œì„±í™”)
- [x] ì‚¬ìš©ì ì‚­ì œ ê¸°ëŠ¥
- [x] ì‚¬ìš© í†µê³„ ë° ë¡œê·¸ ì¡°íšŒ (ìš”ì²­ ìˆ˜ ê¸°ë°˜)
- [ ] ì‹¤ì‹œê°„ í™œì„± ì„¸ì…˜ ëª¨ë‹ˆí„°ë§

### **4. ì‚¬ìš©ëŸ‰ ì¸¡ì • ì‹œìŠ¤í…œ**
- [x] **Frontend**: OpenAI ì´ë²¤íŠ¸ì—ì„œ ì‹¤ì œ ìŒì„± ê¸¸ì´ ì¶”ì¶œ
  ```javascript
  case 'input_audio_buffer.speech_started':
      speechStartTime = Date.now();
  case 'input_audio_buffer.speech_stopped':
      speechEndTime = Date.now();
  case 'conversation.item.input_audio_transcription.completed':
      const actualDuration = (speechEndTime - speechStartTime) / 1000;
      // ì„œë²„ë¡œ ì‹¤ì œ ìŒì„± ê¸¸ì´ ì „ì†¡
  ```

- [x] **Backend**: ì‚¬ìš©ëŸ‰ ì²´í¬ ë° ê¸°ë¡
  ```python
  # transcribe ê²°ê³¼ ìˆ˜ì‹  ì‹œ
  audio_duration = data.get("audio_duration_seconds", 0)

  # ì‚¬ìš©ëŸ‰ ì²´í¬
  if remaining_seconds <= audio_duration:
      # ì‚¬ìš©ëŸ‰ ì´ˆê³¼ ì‹œ ì—°ê²° ì¢…ë£Œ

  # ì‚¬ìš©ëŸ‰ ê¸°ë¡ (source_text, target_text í¬í•¨)
  User.add_usage(user_id, audio_duration)
  UsageLog.record(user_id, 'transcribe', audio_duration, metadata={
      'source_text': transcript,
      'target_text': translated_text
  })
  ```

### **5. UI/UX ê°œì„ **
- [x] ë©”ì¸ í˜ì´ì§€ì— ì‚¬ìš©ëŸ‰ í‘œì‹œ (ì•„ì´ë””, ì†Œì†, ì‚¬ìš©ëŸ‰ ì§„í–‰ë°”)
- [x] ì‚¬ìš©ëŸ‰ ë¶€ì¡± ì‹œ ê²½ê³  ë©”ì‹œì§€
- [x] ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë””ìì¸
- [x] ë¡œê·¸ì¸ í˜ì´ì§€ ë””ìì¸
- [x] ì‹ ê·œ ì‚¬ìš©ì ìƒì„± ì™„ë£Œ ì‹œ ì‹œê°ì  í”¼ë“œë°±

## ğŸ“ **íŒŒì¼ êµ¬ì¡°**
```
â”œâ”€â”€ database.py          # DB ëª¨ë¸ ë° ì—°ê²° ê´€ë¦¬
â”œâ”€â”€ auth.py             # ì¸ì¦ ê´€ë ¨ ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ admin.py            # ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ í˜ì´ì§€
â”œâ”€â”€ login.py            # ë¡œê·¸ì¸ í˜ì´ì§€
â”œâ”€â”€ app.py              # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ (ì‚¬ìš©ëŸ‰ ì²´í¬ ë¡œì§ ì¶”ê°€)
â”œâ”€â”€ components/
â”‚   â””â”€â”€ webrtc.html     # ì‹¤ì œ ìŒì„± ê¸¸ì´ ì¸¡ì • ë¡œì§ ì¶”ê°€
â”œâ”€â”€ data/
â”‚   â””â”€â”€ app.db          # SQLite ë°ì´í„°ë² ì´ìŠ¤
â””â”€â”€ .env                # ê´€ë¦¬ì ê³„ì • ì •ë³´
```

## ğŸ” **ë³´ì•ˆ ê³ ë ¤ì‚¬í•­**
- [x] ë¹„ë°€ë²ˆí˜¸ í•´ì‹± (PBKDF2-SHA256 + Salt)
- [x] ì„¸ì…˜ í† í° ë³´ì•ˆ
- [x] SQL Injection ë°©ì§€ (parameterized queries)
- [x] ê´€ë¦¬ì ê³„ì • .env ê´€ë¦¬
- [x] ì…ë ¥ê°’ ê²€ì¦

## ğŸ“Š **ì‚¬ìš©ëŸ‰ ì¸¡ì • ë°©ì‹**
1. **OpenAI Speech Events**: `speech_started` â†’ `speech_stopped` ì‹œê°„ ì°¨ì´ë¡œ ì‹¤ì œ ìŒì„± ê¸¸ì´ ì¸¡ì •
2. **Fallback**: íƒ€ì´ë° ì •ë³´ ì—†ì„ ì‹œ í…ìŠ¤íŠ¸ ê¸¸ì´ ê¸°ë°˜ ì¶”ì • (`len(text) / 5.0` ì´ˆ)
3. **ì‹¤ì‹œê°„ ì²´í¬**: ë§¤ transcribe ì™„ë£Œ ì‹œì ì— ì‚¬ìš©ëŸ‰ í™•ì¸ ë° ì´ˆê³¼ ì‹œ ì¦‰ì‹œ ì°¨ë‹¨

## âš¡ **ìš°ì„ ìˆœìœ„**
1. **High**: Database + User ëª¨ë¸ êµ¬í˜„
2. **High**: ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ (ê³„ì • ìƒì„± í•„ìˆ˜)
3. **High**: ì‚¬ìš©ëŸ‰ ì¸¡ì • ë° ì œí•œ ë¡œì§
4. **Medium**: ë¡œê·¸ì¸ ì‹œìŠ¤í…œ
5. **Low**: UI/UX ê°œì„ 

## ğŸ§ª **í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤**
- [x] ê´€ë¦¬ì ê³„ì • ìƒì„± ë° ë¡œê·¸ì¸
- [x] ì¼ë°˜ ì‚¬ìš©ì ê³„ì • ìƒì„±
- [x] ì‚¬ìš©ëŸ‰ ì •í™•í•œ ì¸¡ì • ë° ê¸°ë¡
- [x] ì‚¬ìš©ëŸ‰ ì´ˆê³¼ ì‹œ ì„œë¹„ìŠ¤ ì°¨ë‹¨
- [x] ì‚¬ìš©ëŸ‰ ì¶”ê°€ ë¶€ì—¬ ê¸°ëŠ¥

## ğŸ“ˆ **ì„±ê³µ ê¸°ì¤€**
- [x] ê´€ë¦¬ìê°€ ì›¹ UIë¥¼ í†µí•´ ì‚¬ìš©ì ê³„ì •ì„ ì‰½ê²Œ ìƒì„±/ê´€ë¦¬í•  ìˆ˜ ìˆìŒ
- [x] ì‚¬ìš©ìë³„ ìŒì„± ì¸ì‹ ì‚¬ìš©ëŸ‰ì´ ì •í™•íˆ ì¸¡ì •ë˜ê³  ì œí•œë¨
- [x] ì‚¬ìš©ëŸ‰ ì´ˆê³¼ ì‹œ ìë™ìœ¼ë¡œ ì„œë¹„ìŠ¤ ì°¨ë‹¨ë¨
- [x] ëª¨ë“  ì‚¬ìš© ê¸°ë¡ì´ ë¡œê·¸ë¡œ ë‚¨ì•„ ì¶”í›„ ë¶„ì„ ê°€ëŠ¥ (source_text, target_text í¬í•¨)

## ğŸ“ **ì¶”ê°€ ê°œì„ ì‚¬í•­**
- [x] ì‚¬ìš©ì ì •ë³´ UI: "ì‚¬ìš©ì" â†’ "ì•„ì´ë””", "ì´ë¦„" â†’ "ì†Œì†", "ì—­í• " ì œê±°
- [x] ì‚¬ìš©ëŸ‰ í†µê³„: "ì„¸ì…˜ ìˆ˜" â†’ "ìš”ì²­ ìˆ˜"ë¡œ ë ˆì´ë¸” ë³€ê²½
- [x] ì‚¬ìš©ì ì‚­ì œ ê¸°ëŠ¥ ì¶”ê°€ (ê´€ë ¨ ë¡œê·¸ ì—°ì‡„ ì‚­ì œ)
- [x] ì‹ ê·œ ì‚¬ìš©ì ìƒì„± ì™„ë£Œ ì‹œ ì„±ê³µ ë©”ì‹œì§€ ê°œì„ 
- [x] metadataì— ì›ë¬¸/ë²ˆì—­ë¬¸ ì €ì¥ ê¸°ëŠ¥

## ğŸ·ï¸ **Labels**
`enhancement` `database` `authentication` `admin-panel` `billing` `priority-high`
