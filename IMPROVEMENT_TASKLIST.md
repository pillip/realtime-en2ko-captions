# 실시간 자막 시스템 개선 작업 목록

## 📋 개요
AWS Transcribe + Translate + Bedrock 기반 실시간 다중언어 자막 시스템의 사용자 피드백 및 코드 분석을 통한 개선 작업 목록

**예상 작업 기간**: 2-3주
**우선순위**: 🔥High → 🟡Medium → 🔵Low

---

## 🔥 1. 핵심 기능 개선 (High Priority)

### 1.1 다중언어 처리 개선
**사용자 피드백**: 한국어 발화에서 외국어/외래어 혼용, 비-영어권 외국인 영어 인식 문제

- [ ] **한국어-외래어 혼용 처리 개선** `app.py:883-1134`
  - 한국어 confidence 계산 로직 개선 (외래어/영문 단어 포함 처리)
  - 코드-스위칭(code-switching) 감지 알고리즘 추가
  - 실제 테스트: "블록체인 DeFi 프로토콜을 개발합니다" 등

- [ ] **비-영어권 액센트 인식 개선** `app.py:1135-1203`
  - AWS Transcribe 언어별 모델 최적화
  - 신뢰도 임계값 조정 (현재 0.7→0.6으로 완화)
  - 다양한 액센트 테스트 케이스 추가

### 1.2 번역 품질 향상
**사용자 피드백**: 블록체인/창업 컨퍼런스 맞춤 번역

- [ ] **도메인 특화 번역 프롬프트 개선** `app.py:80-168`
  - 현재 Claude 프롬프트 블록체인/Web3/스타트업 용어 강화
  - 전문 용어 사전 구축 및 일관성 유지
  - 번역 품질 A/B 테스트 프레임워크 구성

- [ ] **컨텍스트 기반 번역 개선** `app.py:1447-1620`
  - 문장 단위 → 문맥 단위 번역으로 개선
  - 이전 문장 컨텍스트 유지 로직 추가
  - 기술 발표 특성 반영 (숫자, 도표 등)

### 1.3 속도 최적화
**사용자 피드백**: 전체적인 속도 개선 필요

- [ ] **병렬 처리 최적화** `app.py:1216-1223`
  - 현재 영어/한국어 동시 transcription → 적응형 단일 언어 우선 처리
  - 신뢰도 기반 추가 언어 처리로 비용 50% 절약
  - 지능형 언어 감지 캐싱

- [ ] **버퍼링 및 청킹 최적화** `app.py:517-577`
  - 현재 75청크(3초) → 동적 조정 (25-50청크)
  - VAD 기반 실시간 세그멘테이션 개선
  - 네트워크 레이턴시 기반 버퍼 크기 조정

---

## 🟡 2. UI/UX 개선 (Medium Priority)

### 2.1 설정 패널 개선
**사용자 피드백**: 원문 표시 토글, 언어 표기 제거

- [ ] **원문 표시 토글 기능** `components/webrtc.html:467-493`
  - 설정 패널에 "원문 표시" 체크박스 추가
  - localStorage 기반 설정 유지
  - 실시간 토글 적용

- [ ] **언어 표기 제거** `components/webrtc.html:1137-1138`
  - 현재 `${data.original_text} (${sourceLanguageName})` → `${data.original_text}`
  - 언어별 색상 구분으로 대체 (한국어: 파란색, 영어: 초록색)

- [ ] **고급 설정 추가**
  - 번역 지연 시간 조정 (0.5s~3s)
  - 신뢰도 임계값 사용자 설정
  - 음성 감도 조절

### 2.2 사용성 개선

- [ ] **키보드 단축키 지원**
  - Space: 일시정지/재개
  - Ctrl+C: 자막 복사
  - Esc: 설정 패널 닫기

- [ ] **자막 내보내기 기능**
  - SRT 형식 다운로드
  - 텍스트 파일 저장
  - 클립보드 복사

---

## 🔵 3. 시스템 안정성 및 운영 (Low Priority)

### 3.1 오류 처리 강화

- [ ] **자동 재연결 로직** `app.py:1705-1708`
  - WebSocket 연결 끊김 감지 및 자동 복구
  - AWS 서비스 장애 시 대체 로직
  - 사용자 친화적 오류 메시지

- [ ] **세션 관리 개선**
  - AWS 자격 증명 만료 자동 갱신
  - 긴 세션 안정성 보장 (1시간+)
  - 메모리 누수 방지

### 3.2 모니터링 및 로깅

- [ ] **성능 메트릭 수집**
  - 인식 지연 시간 (P50, P95)
  - 번역 정확도 추적
  - 비용 사용량 실시간 모니터링

- [ ] **사용자 분석**
  - 언어별 사용 통계
  - 오류 발생 빈도
  - 세션 지속 시간

### 3.3 보안 강화

- [ ] **AWS 자격 증명 관리 개선**
  - IAM 역할 기반 접근 제어
  - 최소 권한 원칙 적용
  - 자격 증명 순환 정책

- [ ] **데이터 보안**
  - 음성 데이터 암호화 전송
  - 로그 데이터 마스킹
  - GDPR 준수 검토

---

## 🔧 4. 코드 품질 및 테스트

### 4.1 코드 리팩토링

- [ ] **모듈 분리** `app.py`
  - 번역 로직 별도 모듈화 (`translation.py`)
  - AWS 서비스 추상화 (`aws_services.py`)
  - WebSocket 핸들러 분리 (`websocket_handler.py`)

- [ ] **설정 관리 개선**
  - 환경별 설정 파일 분리
  - 동적 설정 리로드 지원
  - 설정 검증 로직

### 4.2 테스트 코드 작성

- [ ] **단위 테스트**
  - 번역 품질 테스트
  - VAD 로직 테스트
  - 언어 감지 정확도 테스트

- [ ] **통합 테스트**
  - 전체 파이프라인 E2E 테스트
  - 부하 테스트 (동시 세션 10개+)
  - 장애 복구 시나리오 테스트

---

## 📊 5. 성능 최적화 상세

### 5.1 비용 최적화
**현재 시간당 $3.1 → 목표 $1.8 (42% 절약)**

- [ ] **적응형 언어 감지** `app.py:1204-1314`
  - 첫 30초: 병렬 처리로 언어 학습
  - 이후: 메인 언어 90% + 보조 언어 10% 비율
  - 예상 비용 절감: $1.44 → $0.72

- [ ] **지능형 번역 요청 필터링** `app.py:1384-1420`
  - 중복/부분 텍스트 요청 차단 강화
  - 최소 길이/품질 임계값 설정
  - Bedrock 토큰 사용량 20% 절약

### 5.2 지연 시간 최적화
**목표: 현재 2-3초 → 1-1.5초**

- [ ] **스트리밍 파이프라인 개선**
  - 버퍼 크기 동적 조정 (25-100 청크)
  - 예측 기반 번역 사전 로딩
  - WebSocket 메시지 압축

- [ ] **캐싱 전략**
  - 번역 결과 로컬 캐시 (LRU)
  - 자주 사용되는 기술 용어 사전 캐시
  - 브라우저 단위 설정 캐시

---

## 🗓️ 구현 로드맵

### Week 1: 핵심 기능 개선
- 다중언어 처리 개선 (1.1)
- 병렬 처리 최적화 (1.3)
- 원문 토글 기능 (2.1)

### Week 2: 번역 품질 및 속도
- 도메인 특화 번역 프롬프트 (1.2)
- 버퍼링 최적화 (1.3)
- UI/UX 개선 (2.1, 2.2)

### Week 3: 안정성 및 운영
- 오류 처리 강화 (3.1)
- 모니터링 시스템 (3.2)
- 코드 리팩토링 (4.1)

---

## 🎯 성공 지표 (KPI)

1. **성능**
   - 인식 지연: 2-3초 → 1-1.5초
   - 번역 정확도: 현재 85% → 90%+

2. **비용**
   - 시간당 비용: $3.1 → $1.8 (42% 절약)
   - 토큰 사용량: 20% 절약

3. **사용자 경험**
   - 설정 완성도: 언어 표기 제거, 원문 토글
   - 오류 발생률: 50% 감소
   - 세션 안정성: 1시간+ 연속 사용

---

**총 예상 작업시간**: 80-100시간
**우선순위 별 배분**: High(50%) → Medium(30%) → Low(20%)
